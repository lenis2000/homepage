<section class="slide slide-top" id="q-local" data-title="Local Structure">
    <h2 class="slide-title">Local structure</h2>

    <div style="display: grid; grid-template-columns: 1.2fr 1fr; gap: 2vw; margin-top: 1vh; width: 95%;">
        <!-- Left: Full q-weighted path with controls -->
        <div style="display: flex; flex-direction: column; align-items: center;">
            <div style="display: flex; align-items: center; gap: 1vw; font-size: clamp(1rem, 1.8vw, 1.4rem); margin-bottom: 0.5vh;">
                <label for="q-local-gamma-slider" style="font-weight: bold;">γ = </label>
                <input type="range" id="q-local-gamma-slider" min="-5" max="5" step="0.1" value="3.6" style="width: 10vw;">
                <span id="q-local-gamma-value" style="font-weight: bold; min-width: 2.5em;">3.6</span>
                <span>(q = <span id="q-local-q-value">0.990</span>)</span>
                <button id="q-local-resample" style="padding: 0.3vh 0.8vw; cursor: pointer;">Resample</button>
            </div>
            <div style="font-size: clamp(0.9rem, 1.5vw, 1.1rem); color: var(--slide-muted); margin-bottom: 0.5vh;">
                <span>a = 180, b = 135</span> · <span id="q-local-status">Loading...</span>
            </div>
            <canvas id="q-local-canvas" width="1200" height="900" style="height: 50vh; width: auto; cursor: pointer;"></canvas>
        </div>
        <!-- Right: Local zoom view -->
        <div style="display: flex; flex-direction: column; align-items: center;">
            <div id="q-local-view-title" style="font-size: clamp(1.2rem, 2.2vw, 1.8rem); margin-bottom: 0.5vh; opacity: 0; transition: opacity 0.3s;">
                Zoomed in: local segment
            </div>
            <canvas id="q-local-view-canvas" width="600" height="450" style="height: 35vh; width: auto; opacity: 0; transition: opacity 0.3s;"></canvas>
        </div>
    </div>

    <!-- Key insight -->
    <div id="q-local-insight" style="background: #f5f5f5; border-left: 4px solid var(--slide-accent); padding: 1.5vh 2vw; font-size: clamp(1.6rem, 2.8vw, 2.2rem); text-align: left; margin-top: 1vh; opacity: 0; transition: opacity 0.3s;">
        <strong style="color: var(--slide-accent); font-size: 1.2em;">Locally, paths don't know about the global weight — still IID Bernoulli!</strong>
    </div>

    <!-- Explanation -->
    <div id="q-local-explanation" style="background: #e3f2fd; border-left: 4px solid var(--slide-navy); padding: 1vh 1.5vw; font-size: clamp(1.2rem, 2.2vw, 1.8rem); text-align: left; margin-top: 1vh; opacity: 0; transition: opacity 0.3s;">
        <strong style="color: var(--slide-navy);">Why?</strong>
        The limit shape maximizes <strong>entropy minus γ × area</strong>.
        This yields IID Bernoulli with position-dependent \(p\) = slope of the limit shape.
        The weight only affects the <em>global</em> shape, not the <em>local</em> behavior.
    </div>
</section>
