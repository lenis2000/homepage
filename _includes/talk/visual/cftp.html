<section class="slide slide-top" id="cftp" data-title="Exact Sampling">
    <h2 class="slide-title">Exact Sampling</h2>

    <div style="display: grid; grid-template-columns: 48vw 44vw; gap: 2vw; margin-top: 2vh; padding: 0 2vw;">
        <!-- Left column: CFTP explanation -->
        <div style="display: flex; flex-direction: column; gap: 2vh; font-size: clamp(1.2rem, 2.2vw, 1.8rem);">
            <!-- CFTP -->
            <div id="cftp-explain" style="background: #f5f5f5; border-left: 4px solid var(--slide-accent); padding: 1.5vh 1.5vw; text-align: left; opacity: 0; transition: opacity 0.3s;">
                <strong style="color: var(--slide-accent);">Coupling From The Past (CFTP)</strong>
                <span style="color: var(--slide-muted);">[Propp–Wilson 1996]</span>
                <ul style="margin: 0.5vh 0 0 1.2em; padding: 0;">
                    <li>Run Markov chain from <strong>all possible initial states</strong> simultaneously</li>
                    <li>When all chains <strong>couple</strong> (agree), stop</li>
                    <li>Output is an <strong>exact</strong> sample from the stationary distribution</li>
                </ul>
            </div>

            <!-- Monotone coupling -->
            <div id="cftp-why-works" style="background: #e3f2fd; border-left: 4px solid var(--slide-navy); padding: 1.5vh 1.5vw; text-align: left; opacity: 0; transition: opacity 0.3s;">
                <strong style="color: var(--slide-navy);">Monotone sandwich:</strong>
                <div style="margin-top: 0.5vh;">
                    Surfaces are <strong>partially ordered</strong> by height function. The Markov chain is <strong>monotone</strong>, so it suffices to track just the maximal and minimal chains. When they agree — done!
                </div>
            </div>

            <!-- Key point -->
            <div id="cftp-exact" style="background: #fff3e0; border-left: 4px solid #E57200; padding: 1.5vh 1.5vw; text-align: left; opacity: 0; transition: opacity 0.3s;">
                <strong style="color: #E57200; font-size: 1.1em;">Not approximately random — EXACTLY random.</strong>
            </div>
        </div>

        <!-- Right column: 3D simulation canvas -->
        <div style="display: flex; flex-direction: column; gap: 1vh; align-items: center;">
            <canvas id="cftp-sim-canvas" width="1200" height="800" style="height: 52vh; width: auto; border-radius: 8px;"></canvas>
            <div id="cftp-sim-status" style="font-size: clamp(1.2rem, 2.2vw, 1.8rem); color: var(--slide-muted); min-height: 1.5em;"></div>
            <!-- QR code for lozenge-draw -->
            <a id="cftp-qr" href="https://lpetrov.cc/lozenge-draw/" target="_blank" style="display: flex; align-items: center; gap: 1vw; text-decoration: none; transition: opacity 0.3s;">
                <img src="images/qr-lozenge-draw.png" alt="QR code to lozenge-draw" style="height: 15vh; width: auto;">
                <span style="font-size: clamp(1.2rem, 2.2vw, 1.8rem); color: var(--slide-muted);">lpetrov.cc/lozenge-draw</span>
            </a>
        </div>
    </div>
</section>
