<section class="slide slide-center" id="limit-shape-2d" data-title="Limit Shape">
    <h2 class="slide-title">Limit shape and fluctuations</h2>

    <p style="font-size: clamp(1.2rem, 2.2vw, 1.8rem); margin-top: 1vh;">
        Sample a <strong style="color: var(--slide-accent);">uniformly random path</strong> in a large box: <span id="limit-shape-formula" style="display: inline;"></span>
    </p>

    <div style="margin-top: 1vh; display: grid; grid-template-columns: 1fr 1fr; gap: 2vw; align-items: start; width: 95%;">
        <!-- Left: Path overlay -->
        <div style="display: flex; flex-direction: column; align-items: center;">
            <canvas id="limit-shape-canvas" width="1200" height="700" style="height: 45vh; width: auto;"></canvas>
            <div id="limit-shape-status" style="margin-top: 0.5vh; font-size: clamp(0.75rem, 1vw, 1rem); font-style: italic; color: var(--slide-muted);">Ready</div>
        </div>
        <!-- Right: Histogram (hidden initially) -->
        <div id="histogram-container" style="opacity: 0; transition: opacity 0.3s; display: flex; flex-direction: column; align-items: center;">
            <canvas id="histogram-canvas" width="800" height="700" style="height: 45vh; width: auto;"></canvas>
            <div id="histogram-stats" style="margin-top: 0.5vh; font-size: clamp(0.75rem, 1vw, 1rem); color: var(--slide-muted);">
                <span id="histogram-count">0</span> samples
            </div>
            <!-- Mobile placeholder -->
            <div id="histogram-mobile-placeholder" style="display: none; height: 45vh; width: 35vw; background: rgba(35, 45, 75, 0.05); border-radius: 8px; justify-content: center; align-items: center; text-align: center; padding: 2vw;">
                <p style="font-size: clamp(1rem, 1.8vw, 1.4rem); color: var(--slide-muted);">Histogram available<br>on desktop only</p>
            </div>
        </div>
    </div>

    <p id="limit-shape-observation" style="opacity: 0; transition: opacity 0.3s; font-size: clamp(1.2rem, 2.2vw, 1.8rem); margin-top: 1vh;">
        The path follows the <strong style="color: #232D4B;">diagonal</strong> â€” this is the <strong>Law of Large Numbers</strong> (Limit Shape phenomenon).
    </p>

    <p id="limit-shape-question" style="opacity: 0; transition: opacity 0.3s; font-size: clamp(1.2rem, 2.2vw, 1.8rem); margin-top: 1vh; color: var(--slide-accent);">
        What does the histogram of the fluctuations resemble?
    </p>

    <div id="limit-shape-answer" style="opacity: 0; transition: opacity 0.3s; margin-top: 1vh; display: flex; align-items: center; gap: 2vw;">
        <p style="font-size: clamp(1.2rem, 2.2vw, 1.8rem); flex: 1;">
            The distribution at the middle point has the familiar <strong>Bell-shape histogram</strong><br>(also called Gaussian / normal distribution).<br>
            The whole random curve minus the diagonal converges to the <strong>Brownian bridge</strong>.
        </p>
        <div style="flex-shrink: 0;">
            <canvas id="brownian-bridge-canvas" width="400" height="200" style="height: 15vh; width: auto; border: 1px solid #ccc;"></canvas>
        </div>
    </div>
</section>
