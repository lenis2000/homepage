<section class="slide slide-top" id="algebraic-sampling" data-title="Algebraic Sampling">
    <h2 class="slide-title">What Algebraic Structures Can Do for You</h2>

    <div style="display: grid; grid-template-columns: 38vw 54vw; gap: 2vw; margin-top: 1vh; width: 95%;">
        <!-- Left: Explanation -->
        <div style="display: flex; flex-direction: column; gap: 1.5vh; font-size: clamp(1.2rem, 2.2vw, 1.8rem);">
            <div style="background: #e3f2fd; border-left: 4px solid var(--slide-navy); padding: 1vh 1.5vw; text-align: left;">
                <strong style="color: var(--slide-navy);">Commuting transfer matrices</strong>
                <span style="color: var(--slide-muted);">[Borodin-Gorin 2008], [Borodin–Gorin–Rains 2009]</span><br>
                The algebraic structure of the weights (highly specific to the hexagon) gives <strong>commuting Markov operators</strong> that map the desired distribution to the desired distribution <strong>on a different hexagon</strong>.
            </div>

            <div style="background: #f5f5f5; border-left: 4px solid var(--slide-accent); padding: 1vh 1.5vw; text-align: left;">
                <strong style="color: var(--slide-accent);">Growing the hexagon:</strong><br>
                Start from a parallelogram — it has exactly one tiling, so it is already an <strong>exact sample</strong>.
                <br>
                Then apply the Markov operators one by one, changing the hexagon step by step (increasing one side, decreasing the other).
                <br>
                <strong>Each step preserves exactness!</strong>
            </div>

            <div id="as-result" style="background: #f5f5f5; border-left: 4px solid var(--slide-accent); padding: 1vh 1.5vw; text-align: left;">
                <strong style="color: var(--slide-accent);">Polynomial time:</strong><br>
                Each step costs \(\sim N^2\) (area), and we need \(\sim N\) steps — exact sample in \(O(N^3)\) time.
                <div style="margin-top: 0.5vh; color: var(--slide-muted);">
                    Compare: Glauber CFTP needed \(\sim e^{cN}\) steps on the previous slide.
                </div>
            </div>
        </div>

        <!-- Right: 2D canvas -->
        <div style="display: flex; flex-direction: column; align-items: center; gap: 1vh;">
            <div id="as-layer-label" style="font-size: clamp(1.2rem, 2.2vw, 1.8rem); color: var(--slide-muted);">
                Step: <span id="as-layer-count">0</span> / <span id="as-layer-total">80</span>
            </div>
            <canvas id="as-canvas" width="1400" height="1000" style="max-width: 100%; height: auto; max-height: 75vh; border-radius: 8px;"></canvas>
        </div>
    </div>
</section>
